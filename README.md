# TogetherDine Product Brief

## 一句話定位（One-liner）
幫朋友快速敲定聚餐：把「每個人的想吃清單」與「可用時間」一次比對，輸出可行的餐廳 × 時段 × 參與者方案，並一鍵發邀、投票、建行事曆/訂位。

## 電梯簡報（30 秒）
大家約吃飯最卡在兩件事：哪家店、什麼時候。這個 App 把 Beli 的「餐廳清單/社交」體驗帶進群組協作，讀取成員的想吃清單與空檔，演算法產生前 3 名「最適合的餐廳＋時間」方案；成員只要點一下即可投票/確認，並自動建立 Calendar 與訂位連結，讓聚餐從「反覆喬」變成「一次到位」。

## 要解決的痛點（Jobs-to-Be-Done）
- 我想和幾個朋友聚餐，但不想在店家與時間上反覆來回。
- 我們每個人都有想吃清單，希望找出交集而非從零討論。
- 希望一次看到可行選項，並能一鍵確認與加入行事曆。

## 核心價值主張（Value Proposition）
1. **雙重匹配**：同時比對「共同想吃」與「共同空檔」，加速決策。
2. **低摩擦協作**：候選餐廳與時段即時生成，投票與確認在單一介面完成。
3. **落地一鍵式**：自動建立行事曆事件，並附上訂位連結（OpenTable、Resy 等）。

## 核心功能（MVP 範圍）
### P0（必做）
- 個人清單：想吃/吃過、標籤、評分、地圖檢視。
- 建立邀約：選好友，勾選幾間候選餐廳（或由系統依交集推薦），挑選 2–3 個候選時段。
- 可用時間蒐集：讀取 Google Calendar 忙閒或快速標示「週五晚/週六午」。
- 匹配引擎（V1 簡化版）：
  - 分數 = 交集比例 + 可用人數 + 距離中位點/便利性。
  - 產出 Top 3 方案（餐廳 × 時間）。
- 投票/確認：一鍵決定，建立 Calendar 事件，分享連結。

### P1（加值）
- 餐廳匯入：支援 Google Maps、Yelp 書籤匯入。
- 群組偏好學習：常勝組合優先推薦。
- 訂位整合：顯示可訂位時段，點擊跳轉第三方平台。

## 與現有產品的差異
- 比 Beli 多了「群組協作與時間比對」。
- 比 Doodle 多了「餐廳交集與推薦」。
- 比訂位平台多了「從人與偏好出發的決策」。

## 使用流程（User Flow）
1. 每位成員建立或匯入「想吃清單」，並標記可用時段（或讀取 Calendar）。
2. 主揪發起邀約，選擇好友與候選餐廳/時段。
3. 系統產生 Top 3 可行方案，群組成員投票或直接確認。
4. 一鍵建立事件，包含店家、時間、位置、連結，可選擇跳轉訂位。

## 匹配邏輯（V1，可調權重）
- 交集比例：群組成員想吃清單的重疊度。
- 可用人數：能在該時段參與的人數比例。
- 距離與便利性：以成員位置中位點計算的通勤成本。
- 統合上述分數產生推薦排序，預設輸出前三高分方案。

---

## 開發快速開始
以下提供一個 FastAPI 實作範例，將上述產品構想落成一個可運行的 MVP 介面：

### 安裝相依套件
```bash
pip install -r requirements.txt
```

### 啟動開發伺服器
```bash
uvicorn app.main:app --reload
```
伺服器啟動後可透過 `http://127.0.0.1:8000/docs` 進入自動產生的 Swagger UI，進行：
- 建立使用者與餐廳資料
- 上傳可用時段
- 建立邀約並取得系統計算的前三名餐廳 × 時段提案
- 選擇方案並生成模擬的行事曆與訂位連結

### 測試匹配邏輯
```bash
pytest
```
測試涵蓋匹配引擎的排序邏輯與確認邀約時產生行事曆/訂位連結的行為。
